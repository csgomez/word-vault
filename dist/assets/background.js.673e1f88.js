const n=chrome.storage.local,s=[{id:"dfc7e4bc-fe31-46ff-a805-06dfcef89dfa",text:"unique",dateCreated:Date.now(),pageUrl:"https://www.merriam-webster.com/dictionary/unique",tabTitle:"Unique Definition & Meaning - Merriam-Webster",note:"This is the first word saved."},{id:"e0bac9c9-7a5c-42c3-83c8-189f0dd361ed",text:"superfluous",dateCreated:Date.now(),pageUrl:"https://en.m.wiktionary.org/wiki/superfluous",tabTitle:"superfluous - Wiktionary, the free dictionary",note:"This note is superfluous."}],i="__VOCAB_VAULT_CONTEXT_MENU_ID";chrome.contextMenus.onClicked.addListener(u);chrome.runtime.onInstalled.addListener(g);chrome.runtime.onInstalled.addListener(w);l();async function l(){const e=await n.get(null);console.log(e)}function c(){n.set({settings:{trim:!0}})}async function d(){console.log("Initializing word database...");try{const e=await n.get({words:[]});console.log("storedWords:",e),e.words.length===0&&await n.set({words:s}),console.log("Finished initializing word database!")}catch(e){console.error("Error seeding database:",e)}}function u(e,t){f(e.selectionText,e,t)}function g(){chrome.contextMenus.create({title:"Save selection [Word Vault]",contexts:["selection"],id:i},function(){chrome.runtime.lastError&&console.log("Error creating context menu for Word Vault:",chrome.runtime.lastError.message)})}async function f(e,t,r){try{const{words:o}=await n.get("words"),a={id:crypto.randomUUID(),text:e,dateCreated:Date.now(),pageUrl:t.pageUrl,tabTitle:r.title,note:""};o.push(a),await n.set({words:o})}catch(o){console.error("Error saving new word:",o)}}async function w(e){const t=e.reason;t===chrome.runtime.OnInstalledReason.UPDATE&&h(),t===chrome.runtime.OnInstalledReason.INSTALL&&(console.log("Handling install..."),m())}function m(){console.log("Handling install..."),c(),d()}async function h(){console.log("Handling update...")}
